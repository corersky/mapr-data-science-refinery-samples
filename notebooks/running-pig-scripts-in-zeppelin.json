{"paragraphs":[{"text":"%md\n## This section contains a sample of an Apache Pig script that you can run in your Apache Zeppelin notebook.","user":"mapr","dateUpdated":"2019-04-26T07:49:11-0700","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>This section contains a sample of an Apache Pig script that you can run in your Apache Zeppelin notebook.</h2>\n</div>"}]},"apps":[],"jobName":"paragraph_1556289817842_1694493442","id":"20150213-231621_168813393","dateCreated":"2019-04-26T07:43:37-0700","dateStarted":"2019-04-26T07:49:11-0700","dateFinished":"2019-04-26T07:49:11-0700","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1191"},{"title":"Load data into table","text":"%pig\n\nbankText = load '/mapr/node3.cluster.com/tmp/bank.csv' using PigStorage(';');\nbank = foreach bankText generate $0 as age, $1 as job, $2 as marital, $3 as education, $5 as balance; \nbank = filter bank by age != '\"age\"';\nbank = foreach bank generate (int)age, REPLACE(job,'\"','') as job, REPLACE(marital, '\"', '') as marital, (int)(REPLACE(balance, '\"', '')) as balance;\nstore bank into 'clean_bank1.csv' using PigStorage(';'); \n\n-- this statement is optional, it just show you that most of time %pig.script is used for data munging before querying the data. ","user":"mapr","dateUpdated":"2019-04-26T07:54:13-0700","config":{"lineNumbers":false,"editorSetting":{"language":"pig","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/pig","fontSize":9,"title":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1556289817842_272671593","id":"20150210-015259_1403135953","dateCreated":"2019-04-26T07:43:37-0700","dateStarted":"2019-04-26T07:54:13-0700","dateFinished":"2019-04-26T07:51:12-0700","status":"RUNNING","progressUpdateIntervalMs":500,"$$hashKey":"object:1192","errorMessage":""},{"text":"%pig.query\n\nbank_data = filter bank by age < 30;\nb = group bank_data by age;\nforeach b generate group, COUNT($1);","user":"mapr","dateUpdated":"2019-04-26T07:51:19-0700","config":{"editorSetting":{"language":"pig","editOnDblClick":false},"colWidth":4,"editorMode":"ace/mode/pig","fontSize":9,"results":[{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{"xAxis":{"name":"age","index":0,"aggr":"sum"},"yAxis":{"name":"value","index":1,"aggr":"sum"}},"setting":{"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"stackedAreaChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"age":"string","value":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}},"helium":{}}],"enabled":true,"editorHide":false,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias paragraph_20150210_015302_1492795503\n\tat org.apache.pig.PigServer.openIterator(PigServer.java:1032)\n\tat org.apache.zeppelin.pig.PigQueryInterpreter.interpret(PigQueryInterpreter.java:106)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.FIFOScheduler$1.run(FIFOScheduler.java:140)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: java.io.IOException: Job terminated with anomalous status FAILED\n\tat org.apache.pig.PigServer.openIterator(PigServer.java:1024)\n\t... 12 more\n"}]},"apps":[],"jobName":"paragraph_1556289817843_766799487","id":"20150210-015302_1492795503","dateCreated":"2019-04-26T07:43:37-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1193","title":"Get the number of each age where age is less than 30"},{"text":"%pig.query\n\nbank_data = filter bank by age < ${maxAge=40};\nb = group bank_data by age;\nforeach b generate group, COUNT($1) as count;","user":"mapr","dateUpdated":"2019-04-26T07:53:32-0700","config":{"editorSetting":{"language":"pig","editOnDblClick":false},"colWidth":4,"editorMode":"ace/mode/pig","fontSize":9,"results":[{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{"xAxis":{"name":"age","index":0,"aggr":"sum"},"yAxis":{"name":"value","index":1,"aggr":"sum"}},"setting":{"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}},"helium":{}}],"enabled":true,"title":true},"settings":{"params":{"maxAge":"40"},"forms":{"maxAge":{"type":"TextBox","name":"maxAge","defaultValue":"40","hidden":false,"$$hashKey":"object:1963"}}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias paragraph_20150212_145404_867439529\n\tat org.apache.pig.PigServer.openIterator(PigServer.java:1032)\n\tat org.apache.zeppelin.pig.PigQueryInterpreter.interpret(PigQueryInterpreter.java:106)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.FIFOScheduler$1.run(FIFOScheduler.java:140)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: java.io.IOException: Job terminated with anomalous status FAILED\n\tat org.apache.pig.PigServer.openIterator(PigServer.java:1024)\n\t... 12 more\n"}]},"apps":[],"jobName":"paragraph_1556289817843_566661286","id":"20150212-145404_867439529","dateCreated":"2019-04-26T07:43:37-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1194","title":"The same as left, but use dynamic text form so that use can specify the variable maxAge in textbox. Dynamic form is a very cool feature of Zeppelin"},{"text":"%pig.query\n\nbank_data = filter bank by marital=='${marital=single,single|divorced|married}';\nb = group bank_data by age;\nforeach b generate group, COUNT($1) as count;","user":"mapr","dateUpdated":"2019-04-26T07:51:55-0700","config":{"editorSetting":{"language":"pig","editOnDblClick":false},"colWidth":4,"editorMode":"ace/mode/pig","fontSize":9,"runOnSelectionChange":true,"results":[{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{"xAxis":{"name":"age","index":0,"aggr":"sum"},"yAxis":{"name":"value","index":1,"aggr":"sum"}},"setting":{"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}},"helium":{}}],"enabled":true,"title":true},"settings":{"params":{"marital":"single"},"forms":{"marital":{"type":"Select","options":[{"value":"single","$$hashKey":"object:1918"},{"value":"divorced","$$hashKey":"object:1919"},{"value":"married","$$hashKey":"object:1920"}],"name":"marital","defaultValue":"single","hidden":false,"$$hashKey":"object:1909"}}},"apps":[],"jobName":"paragraph_1556289817843_-1779443686","id":"20150213-230422_1600658137","dateCreated":"2019-04-26T07:43:37-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1195","title":"Get the number of each age for specific marital type, also use dynamic form here. User can choose the marital type in the dropdown list (see screenshot below)."},{"text":"%md\n\nAbout bank data\n\n```\nCitation Request:\n  This dataset is public available for research. The details are described in [Moro et al., 2011]. \n  Please include this citation if you plan to use this database:\n\n  [Moro et al., 2011] S. Moro, R. Laureano and P. Cortez. Using Data Mining for Bank Direct Marketing: An Application of the CRISP-DM Methodology. \n  In P. Novais et al. (Eds.), Proceedings of the European Simulation and Modelling Conference - ESM'2011, pp. 117-121, Guimarães, Portugal, October, 2011. EUROSIS.\n\n  Available at: [pdf] http://hdl.handle.net/1822/14838\n                [bib] http://www3.dsi.uminho.pt/pcortez/bib/2011-esm-1.txt\n```","user":"mapr","dateUpdated":"2019-04-26T07:43:37-0700","config":{"editorSetting":{},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>About bank data</p>\n<pre><code>Citation Request:\n  This dataset is public available for research. The details are described in [Moro et al., 2011]. \n  Please include this citation if you plan to use this database:\n\n  [Moro et al., 2011] S. Moro, R. Laureano and P. Cortez. Using Data Mining for Bank Direct Marketing: An Application of the CRISP-DM Methodology. \n  In P. Novais et al. (Eds.), Proceedings of the European Simulation and Modelling Conference - ESM&#39;2011, pp. 117-121, Guimarães, Portugal, October, 2011. EUROSIS.\n\n  Available at: [pdf] http://hdl.handle.net/1822/14838\n                [bib] http://www3.dsi.uminho.pt/pcortez/bib/2011-esm-1.txt\n</code></pre>\n</div>"}]},"apps":[],"jobName":"paragraph_1556289817844_-1275693286","id":"20150326-214658_12335843","dateCreated":"2019-04-26T07:43:37-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1196"},{"user":"mapr","dateUpdated":"2019-04-26T07:43:37-0700","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1556289817844_1040555571","id":"20150703-133047_853701097","dateCreated":"2019-04-26T07:43:37-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1197"}],"name":"Running Pig Scripts in Zeppelin","id":"2E95YT9J9","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"python:shared_process":[],"sh:shared_process":[],"pig:shared_process":[],"spark:shared_process":[],"hive:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":true,"looknfeel":"default","personalizedMode":"false"},"info":{}}